(window.webpackJsonp=window.webpackJsonp||[]).push([[18],{540:function(t,s,e){"use strict";e.r(s);var v=e(8),a=Object(v.a)({},(function(){var t=this,s=t.$createElement,e=t._self._c||s;return e("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[e("h1",{attrs:{id:"性能指标和优化目标"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#性能指标和优化目标"}},[t._v("#")]),t._v(" 性能指标和优化目标")]),t._v(" "),e("div",{staticClass:"language- line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[t._v("项目优化是一个前端工程师都会面临到的问题，这篇博客主要分享性能优化的前端工具。\n")])]),t._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[t._v("1")]),e("br")])]),e("h2",{attrs:{id:"network-瀑布图"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#network-瀑布图"}},[t._v("#")]),t._v(" NetWork 瀑布图")]),t._v(" "),e("ul",[e("li",[e("p",[t._v("蓝色的线DOMContentLoaded： DOM加载完成的时间")])]),t._v(" "),e("li",[e("p",[e("code",[t._v("红色的线：站点其它资源加载完成的时间")])])]),t._v(" "),e("li",[e("p",[t._v("DNS Lookup：dns寻址时间")])]),t._v(" "),e("li",[e("p",[t._v("inital connection: TCP连接时间")])]),t._v(" "),e("li",[e("p",[t._v("TTFB: 你的请求发出到你的请求回来总时长(决定了你的网站响应时间)")])])]),t._v(" "),e("h2",{attrs:{id:"lighthouse"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#lighthouse"}},[t._v("#")]),t._v(" Lighthouse")]),t._v(" "),e("ul",[e("li",[t._v("First Contentful Paint  首次渲染")]),t._v(" "),e("li",[t._v("Speed index 速度指数(谷歌官方给定的时间是小于4S )")]),t._v(" "),e("li",[t._v("FPS 查看")])]),t._v(" "),e("h1",{attrs:{id:"rail测量模型"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#rail测量模型"}},[t._v("#")]),t._v(" RAIL测量模型")]),t._v(" "),e("p",[t._v("谷歌提出的前端性能测量模型，通过它可以知道我们的性能测试目标，RAIL是如下字母的缩写")]),t._v(" "),e("ul",[e("li",[e("p",[t._v("Response 响应  处理事件应在"),e("code",[t._v("50ms")]),t._v("内完成 "),e("code",[t._v("这个响应不是指代网络请求的响应,而是指用户交互的响应")])])]),t._v(" "),e("li",[e("p",[t._v("Animation 动画")]),t._v(" "),e("ul",[e("li",[t._v("动画是否流畅 FPS  ≈ 60")]),t._v(" "),e("li",[t._v("每10ms产生一帧")])])]),t._v(" "),e("li",[e("p",[t._v("Idle 空闲 尽可能增加空闲时间，不能让你的主线程一直处于忙碌的状态(忙碌的状态就会很卡)")]),t._v(" "),e("ul",[e("li",[e("p",[t._v("通过DevTool 性能面板查看")]),t._v(" "),e("p",[e("img",{attrs:{src:"/Users/feiwu/workspace/%E5%AD%97%E8%8A%82%E8%B7%B3%E5%8A%A8/%E5%89%8D%E7%AB%AF%E6%80%A7%E8%83%BD%E4%BC%98%E5%8C%96/screen/Lighthouse@2x.png",alt:"Lighthouse@2x"}})])])])]),t._v(" "),e("li",[e("p",[t._v("Load 在"),e("code",[t._v("5S")]),t._v("内完成加载并可以交互")])])]),t._v(" "),e("h1",{attrs:{id:"性能测量工具"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#性能测量工具"}},[t._v("#")]),t._v(" 性能测量工具")]),t._v(" "),e("ul",[e("li",[t._v("Chrome DevTools")]),t._v(" "),e("li",[t._v("Lighthouse 网站整体质量评估")]),t._v(" "),e("li",[t._v("WebPagesTest 多测试地点、全面性能报告")])]),t._v(" "),e("h1",{attrs:{id:"使用webpagetest评估web网站性能"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#使用webpagetest评估web网站性能"}},[t._v("#")]),t._v(" 使用WebPageTest评估Web网站性能")]),t._v(" "),e("h2",{attrs:{id:"https-webpagetest-org"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#https-webpagetest-org"}},[t._v("#")]),t._v(" https://webpagetest.org")]),t._v(" "),e("p",[e("img",{attrs:{src:"/Users/feiwu/workspace/%E5%AD%97%E8%8A%82%E8%B7%B3%E5%8A%A8/%E5%89%8D%E7%AB%AF%E6%80%A7%E8%83%BD%E4%BC%98%E5%8C%96/screen/WX20220304-141724@2x.png",alt:"WX20220304-141724@2x"}})]),t._v(" "),e("h2",{attrs:{id:"测试结果"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#测试结果"}},[t._v("#")]),t._v(" 测试结果")]),t._v(" "),e("p",[t._v("![image-20220304141940227](/Users/feiwu/Library/Application Support/typora-user-images/image-20220304141940227.png)")]),t._v(" "),e("p",[t._v("如下是我们比较关心的指标")]),t._v(" "),e("ul",[e("li",[t._v("First Byte：表示我们发出去的第一个请求 响应的时间是多少")]),t._v(" "),e("li",[t._v("Start Render：开始首屏渲染")]),t._v(" "),e("li",[t._v("Speed index:  速度指数")])]),t._v(" "),e("h1",{attrs:{id:"使用-lighthouse-分析前端性能"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#使用-lighthouse-分析前端性能"}},[t._v("#")]),t._v(" 使用 Lighthouse 分析前端性能")]),t._v(" "),e("p",[t._v("Lighthouse 最新版的提供了 6 个性能指标："),e("strong",[t._v("FCP")]),t._v("、"),e("strong",[t._v("SI")]),t._v("、"),e("strong",[t._v("LCP")]),t._v("、"),e("strong",[t._v("TTI")]),t._v("、"),e("strong",[t._v("TBT")]),t._v(" 和 "),e("strong",[t._v("CLS")]),t._v("；权重分别是 15%，15%，25%，15%，25% 和 5%。Lighthouse 会根据权重计算得到一个分数值。")]),t._v(" "),e("p",[t._v("通过全局npm安装的方式使用")]),t._v(" "),e("div",{staticClass:"language-shell line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-shell"}},[e("code",[e("span",{pre:!0,attrs:{class:"token function"}},[t._v("npm")]),t._v(" i lighthouse -g\n\n"),e("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#使用也很简单")]),t._v("\nlighthouse 你要测试的网站\nighthouse https://www.baidu.com/ --locale"),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v("zh-CN --preset"),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v("desktop --disable-network-throttling"),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v("true --disable-storage-reset"),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v("true\n"),e("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 测试完成后，会在terminal中告诉你报告生成的地址")]),t._v("\n")])]),t._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[t._v("1")]),e("br"),e("span",{staticClass:"line-number"},[t._v("2")]),e("br"),e("span",{staticClass:"line-number"},[t._v("3")]),e("br"),e("span",{staticClass:"line-number"},[t._v("4")]),e("br"),e("span",{staticClass:"line-number"},[t._v("5")]),e("br"),e("span",{staticClass:"line-number"},[t._v("6")]),e("br")])]),e("h3",{attrs:{id:"执行的结果"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#执行的结果"}},[t._v("#")]),t._v(" 执行的结果")]),t._v(" "),e("p",[e("img",{attrs:{src:"/Users/feiwu/workspace/%E5%AD%97%E8%8A%82%E8%B7%B3%E5%8A%A8/%E5%89%8D%E7%AB%AF%E6%80%A7%E8%83%BD%E4%BC%98%E5%8C%96/screen/WX20220304-143852@2x.png",alt:"WX20220304-143852@2x"}})]),t._v(" "),e("ul",[e("li",[e("p",[e("strong",[t._v("Performance")]),t._v(" 性能总指标")])]),t._v(" "),e("li",[e("p",[e("strong",[t._v("Accessibility")]),t._v("  可访问指标")])]),t._v(" "),e("li",[e("p",[e("strong",[t._v("Best Practices")])])]),t._v(" "),e("li",[e("p",[e("strong",[t._v("SEO")])])]),t._v(" "),e("li",[e("p",[e("strong",[t._v("PWA")])])])]),t._v(" "),e("h3",{attrs:{id:"lighthouse-优化建议"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#lighthouse-优化建议"}},[t._v("#")]),t._v(" lighthouse 优化建议")]),t._v(" "),e("p",[t._v("在 lighthouse 的优化建议中，我们可以看到和 JavaScript 资源加载相关的建议有：")]),t._v(" "),e("ul",[e("li",[e("strong",[t._v("Reduce unused JavaScript")])]),t._v(" "),e("li",[e("strong",[t._v("Minify JavaScript")])]),t._v(" "),e("li",[e("strong",[t._v("Remove duplicate modules in JavaScript bundles")])])]),t._v(" "),e("p",[t._v("资源加载的优化通常有几个思路：")]),t._v(" "),e("ul",[e("li",[t._v("合理的加载顺序/策略（延迟加载/预先加载）")]),t._v(" "),e("li",[t._v("压缩优化资源的体积")]),t._v(" "),e("li",[t._v("代码分割 & 公共提取 & 按需加载")])]),t._v(" "),e("p",[e("img",{attrs:{src:"/Users/feiwu/workspace/%E5%AD%97%E8%8A%82%E8%B7%B3%E5%8A%A8/%E5%89%8D%E7%AB%AF%E6%80%A7%E8%83%BD%E4%BC%98%E5%8C%96/screen/WX20220304-143907@2x.png",alt:"WX20220304-143907@2x"}})]),t._v(" "),e("p",[e("strong",[t._v("内容呈现相关")])]),t._v(" "),e("ul",[e("li",[e("strong",[t._v("FCP")]),t._v(" "),e("strong",[t._v("首次内容绘制")]),t._v("。\n"),e("ul",[e("li",[t._v("它统计的是"),e("strong",[t._v("从进入页面到首次有 DOM 内容绘制所用的时间")]),t._v("。这里的 DOM 内容指的是文本、图片、非空的 "),e("code",[t._v("canvas")]),t._v(" 或者 SVG。")])])]),t._v(" "),e("li",[e("strong",[t._v("LCP")]),t._v(" "),e("strong",[t._v("最大内容绘制")]),t._v(" "),e("ul",[e("li",[t._v("它统计的是"),e("strong",[t._v("从页面开始加载到视窗内最大内容绘制的所需时间")]),t._v("，这里的内容指文本、图片、视频、非空的 canvas 或者 SVG 等。")])])])]),t._v(" "),e("p",[e("strong",[t._v("用户交互相关")])]),t._v(" "),e("ul",[e("li",[e("p",[t._v("TTI "),e("strong",[t._v("页面可交互的时间")])]),t._v(" "),e("ul",[e("li",[t._v("页面开始绘制内容，即 "),e("strong",[t._v("FCP")]),t._v(" 指标开始之后")]),t._v(" "),e("li",[t._v("用户的交互可以及时响应：")]),t._v(" "),e("li",[t._v("页面中大部分可见的元素已经注册了对应的监听事件（通常在 DOMContentLoaded 事件之后）")]),t._v(" "),e("li",[t._v("在 "),e("strong",[t._v("TTI")]),t._v(" 之后持续 5 秒的时间内无"),e("strong",[t._v("长任务")]),t._v("执行（没有超过 50 ms 的执行任务 & 没有超过 2 个 GET 请求）")])])]),t._v(" "),e("li",[e("p",[t._v("TBT "),e("strong",[t._v("阻塞总时间")])]),t._v(" "),e("ul",[e("li",[e("p",[t._v("测量的是 "),e("strong",[t._v("FCP")]),t._v(" 与 "),e("strong",[t._v("TTI")]),t._v(" 之间的时间间隔。这个指标反映了用户的交互是否能及时响应。 如果主线程执行了长任务会导致用户的输入无法及时响应。当主线执行的任务所需的时长超过 50ms，我们就认为这是一个长任务（"),e("a",{attrs:{href:"https://link.zhihu.com/?target=https%3A//web.dev/custom-metrics/%23long-tasks-api",target:"_blank",rel:"noopener noreferrer"}},[t._v("long task"),e("OutboundLink")],1),t._v("）。假设在主线程上执行了一系列的任务，每个长任务的阻塞时间等于执行时间减去 50 ms，最后可以统计得到一个总的阻塞时间。")]),t._v(" "),e("p",[e("img",{attrs:{src:"/Users/feiwu/workspace/%E5%AD%97%E8%8A%82%E8%B7%B3%E5%8A%A8/%E5%89%8D%E7%AB%AF%E6%80%A7%E8%83%BD%E4%BC%98%E5%8C%96/screen/TBT.jpeg",alt:"TBT"}})])])])])])])}),[],!1,null,null,null);s.default=a.exports}}]);