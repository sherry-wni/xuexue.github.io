(window.webpackJsonp=window.webpackJsonp||[]).push([[17],{538:function(a,s,n){"use strict";n.r(s);var t=n(8),r=Object(t.a)({},(function(){var a=this,s=a.$createElement,n=a._self._c||s;return n("ContentSlotsDistributor",{attrs:{"slot-key":a.$parent.slotKey}},[n("div",{staticClass:"custom-block tip"},[n("p",{staticClass:"title"},[a._v("使用场景")]),n("p",[a._v("在3D地图上实现路线渲染，需要从后台获取大量数据点进行渲染，由于数据过多，导致接口请求时间延长，渲染缓慢等问题，所以进行数据压缩提高接口响应速度")])]),n("p",[a._v("...")]),a._v(" "),n("h2",{attrs:{id:"安装"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#安装"}},[a._v("#")]),a._v(" 安装")]),a._v(" "),n("div",{staticClass:"language-bash line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-bash"}},[n("code",[n("span",{pre:!0,attrs:{class:"token function"}},[a._v("npm")]),a._v(" i pako\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[a._v("# or")]),a._v("\n"),n("span",{pre:!0,attrs:{class:"token function"}},[a._v("yarn")]),a._v(" "),n("span",{pre:!0,attrs:{class:"token function"}},[a._v("add")]),a._v(" pako\n\n")])]),a._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[a._v("1")]),n("br"),n("span",{staticClass:"line-number"},[a._v("2")]),n("br"),n("span",{staticClass:"line-number"},[a._v("3")]),n("br"),n("span",{staticClass:"line-number"},[a._v("4")]),n("br")])]),n("h2",{attrs:{id:"引用"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#引用"}},[a._v("#")]),a._v(" 引用")]),a._v(" "),n("div",{staticClass:"language-bash line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-bash"}},[n("code",[n("span",{pre:!0,attrs:{class:"token function"}},[a._v("import")]),a._v(" pako from "),n("span",{pre:!0,attrs:{class:"token string"}},[a._v("'pako'")]),a._v("\n\n")])]),a._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[a._v("1")]),n("br"),n("span",{staticClass:"line-number"},[a._v("2")]),n("br")])]),n("h2",{attrs:{id:"压缩"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#压缩"}},[a._v("#")]),a._v(" 压缩")]),a._v(" "),n("div",{staticClass:"language-script line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[a._v("  const zip = (str) => {\n     \tvar binaryString = pako.gzip(str, { to: 'string' });\n     \treturn btoa(binaryString);\n   }\n")])]),a._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[a._v("1")]),n("br"),n("span",{staticClass:"line-number"},[a._v("2")]),n("br"),n("span",{staticClass:"line-number"},[a._v("3")]),n("br"),n("span",{staticClass:"line-number"},[a._v("4")]),n("br")])]),n("h2",{attrs:{id:"解压"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#解压"}},[a._v("#")]),a._v(" 解压")]),a._v(" "),n("div",{staticClass:"language-script line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[a._v("const unzip = (b64Data) => {\n  let strData = atob(b64Data);\n  // const charData = strData.split('').map((x) => x.charCodeAt(0));\n  const charData = strData.split(',').map((x) => x);\n  const binData = new Uint8Array(charData);\n  const data = pako.inflate(binData);\n  strData = Utf8ArrayToStr(data);\n  return strData;\n};\n/**\n * utf-8 Array 转化字符串\n * @param array Utf8Array\n * @returns {string}\n * @constructor\n */\nconst Utf8ArrayToStr = (array) => {\n  const len = array.length;\n  let out = '';\n  let i = 0;\n  let char1, char2, char3, char4;\n  while (i < len) {\n    char1 = array[i++];\n    // 当单个字节时, 最大值 '01111111', 最小值 '00000000' 右移四位 07, 00\n    // 当两个字节时, 最大值 '11011111', 最小值 '11000000' 右移四位 13, 12\n    // 当三个字节时, 最大值 '11101111', 最小值 '11100000' 右移四位 14, 14\n    if (char1 >> 4 <= 7) {\n      out += String.fromCharCode(char1);\n    } else if (char1 >> 4 === 12 || char1 >> 4 === 13) {\n      char2 = array[i++];\n      out += String.fromCharCode(((char1 & 0x1F) << 6) | (char2 & 0x3F));\n    } else if (char1 >> 4 === 14) {\n      char2 = array[i++];\n      char3 = array[i++];\n      char4 = ((char1 & 0x0F) << 12) | ((char2 & 0x3F) << 6);\n      out += String.fromCharCode(char4 | ((char3 & 0x3F) << 0));\n    }\n  }\n  return out;\n};\n")])]),a._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[a._v("1")]),n("br"),n("span",{staticClass:"line-number"},[a._v("2")]),n("br"),n("span",{staticClass:"line-number"},[a._v("3")]),n("br"),n("span",{staticClass:"line-number"},[a._v("4")]),n("br"),n("span",{staticClass:"line-number"},[a._v("5")]),n("br"),n("span",{staticClass:"line-number"},[a._v("6")]),n("br"),n("span",{staticClass:"line-number"},[a._v("7")]),n("br"),n("span",{staticClass:"line-number"},[a._v("8")]),n("br"),n("span",{staticClass:"line-number"},[a._v("9")]),n("br"),n("span",{staticClass:"line-number"},[a._v("10")]),n("br"),n("span",{staticClass:"line-number"},[a._v("11")]),n("br"),n("span",{staticClass:"line-number"},[a._v("12")]),n("br"),n("span",{staticClass:"line-number"},[a._v("13")]),n("br"),n("span",{staticClass:"line-number"},[a._v("14")]),n("br"),n("span",{staticClass:"line-number"},[a._v("15")]),n("br"),n("span",{staticClass:"line-number"},[a._v("16")]),n("br"),n("span",{staticClass:"line-number"},[a._v("17")]),n("br"),n("span",{staticClass:"line-number"},[a._v("18")]),n("br"),n("span",{staticClass:"line-number"},[a._v("19")]),n("br"),n("span",{staticClass:"line-number"},[a._v("20")]),n("br"),n("span",{staticClass:"line-number"},[a._v("21")]),n("br"),n("span",{staticClass:"line-number"},[a._v("22")]),n("br"),n("span",{staticClass:"line-number"},[a._v("23")]),n("br"),n("span",{staticClass:"line-number"},[a._v("24")]),n("br"),n("span",{staticClass:"line-number"},[a._v("25")]),n("br"),n("span",{staticClass:"line-number"},[a._v("26")]),n("br"),n("span",{staticClass:"line-number"},[a._v("27")]),n("br"),n("span",{staticClass:"line-number"},[a._v("28")]),n("br"),n("span",{staticClass:"line-number"},[a._v("29")]),n("br"),n("span",{staticClass:"line-number"},[a._v("30")]),n("br"),n("span",{staticClass:"line-number"},[a._v("31")]),n("br"),n("span",{staticClass:"line-number"},[a._v("32")]),n("br"),n("span",{staticClass:"line-number"},[a._v("33")]),n("br"),n("span",{staticClass:"line-number"},[a._v("34")]),n("br"),n("span",{staticClass:"line-number"},[a._v("35")]),n("br"),n("span",{staticClass:"line-number"},[a._v("36")]),n("br"),n("span",{staticClass:"line-number"},[a._v("37")]),n("br"),n("span",{staticClass:"line-number"},[a._v("38")]),n("br"),n("span",{staticClass:"line-number"},[a._v("39")]),n("br")])])])}),[],!1,null,null,null);s.default=r.exports}}]);